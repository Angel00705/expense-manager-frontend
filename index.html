<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Expense Manager</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><defs><linearGradient id='borderGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%238b5cf6'/><stop offset='50%' stop-color='%236d28d9'/><stop offset='100%' stop-color='%231e40af'/></linearGradient><linearGradient id='checkGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%23a78bfa'/><stop offset='100%' stop-color='%234f46e5'/></linearGradient><filter id='glow' x='-50%' y='-50%' width='200%' height='200%'><feGaussianBlur in='SourceGraphic' stdDeviation='1' result='blur'/><feMerge><feMergeNode in='blur'/><feMergeNode in='SourceGraphic'/></feMerge></filter></defs><circle cx='10' cy='10' r='9' fill='none' stroke='url(%23borderGrad)' stroke-width='1.5' opacity='0.9'/><path d='M6,10 L8.5,12.5 L14,7' stroke='url(%23checkGrad)' stroke-width='2.5' fill='none' stroke-linecap='round' stroke-linejoin='round' filter='url(%23glow)'/></svg>">
</head>
<body>
    <div class="login-container">
        <div class="login-card animate-bounce-in">
            <h1 class="login-title">üéØ IP Expense Manager</h1>
            <p class="login-subtitle">–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞–º–∏ –ò–ü</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <input type="email" class="form-control" id="email" placeholder="üìß Email" required>
                </div>
                <div class="form-group">
                    <input type="password" class="form-control" id="password" placeholder="üîí –ü–∞—Ä–æ–ª—å" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    üöÄ –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                </button>
            </form>
            
            <div class="quick-access">
    <p style="color: var(--text-light); margin-bottom: 16px; font-size: 0.9rem;">–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</p>
    <button type="button" class="btn btn-outline" style="width: 100%; margin-bottom: 8px;" 
            onclick="fillCredentials('admin@test.ru', 'admin123')">
        üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
    </button>
    <button type="button" class="btn btn-outline" style="width: 100%; margin-bottom: 8px;" 
            onclick="fillCredentials('astrakhan@test.ru', 'manager123')">
        üë©‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä –ê—Å—Ç—Ä–∞—Ö–∞–Ω—å
    </button>
    <button type="button" class="btn btn-outline" style="width: 100%;" 
            onclick="fillCredentials('buryatia@test.ru', 'manager123')">
        üë©‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä –ë—É—Ä—è—Ç–∏—è
    </button>
</div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    
    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è credentials
        function fillCredentials(email, password) {
            console.log('üîê –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è:', email);
            document.getElementById('email').value = email;
            document.getElementById('password').value = password;
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º—É
            setTimeout(() => {
                document.getElementById('loginForm').dispatchEvent(new Event('submit'));
            }, 100);
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            Auth.init();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...');
            console.log('–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', Auth.currentUser);
            
                      
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                
                console.log('üìß –ü–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞:', email);
                
                if (!email || !password) {
                    if (typeof Notification !== 'undefined') {
                        Notification.error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                    } else {
                        alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                    }
                    return;
                }
                
                const result = Auth.login(email, password);
                
                if (result.success) {
                    if (typeof Notification !== 'undefined') {
                        Notification.success('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + result.user.name + '!');
                    } else {
                        alert('‚úÖ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + result.user.name + '!');
                    }
                    setTimeout(() => {
                        window.location.href = 'dashboard.html';
                    }, 1000);
                } else {
                    if (typeof Notification !== 'undefined') {
                        Notification.error(result.error);
                    } else {
                        alert('‚ùå ' + result.error);
                    }
                }
            });
        });
    </script>
</body>
</html>