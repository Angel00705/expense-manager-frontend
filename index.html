<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Expense Manager</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="glass-card" style="max-width: 400px; margin: 100px auto; padding: 40px; text-align: center;">
            <h1 style="margin-bottom: 8px; color: var(--primary);">üéØ IP Expense Manager</h1>
            <p style="color: var(--text-light); margin-bottom: 32px;">–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞–º–∏ –ò–ü</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <input type="email" class="form-control" id="email" placeholder="üìß Email" required>
                </div>
                <div class="form-group">
                    <input type="password" class="form-control" id="password" placeholder="üîí –ü–∞—Ä–æ–ª—å" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    üöÄ –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                </button>
            </form>
            
            <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border-light);">
                <p style="color: var(--text-light); margin-bottom: 16px;">–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</p>
                <button type="button" class="btn btn-outline" style="width: 100%; margin-bottom: 8px;" 
                        onclick="fillCredentials('admin@test.ru', 'admin123')">
                    üë®‚Äçüíº –í–æ–π—Ç–∏ –∫–∞–∫ –ê–¥–º–∏–Ω
                </button>
                <button type="button" class="btn btn-outline" style="width: 100%;" 
                        onclick="fillCredentials('astrakhan@test.ru', 'manager123')">
                    üë©‚Äçüíº –í–æ–π—Ç–∏ –∫–∞–∫ –ú–µ–Ω–µ–¥–∂–µ—Ä
                </button>
            </div>
        </div>
    </div>

    <!-- –ü–ï–†–ï–ù–ï–°–ò–¢–ï –°–ö–†–ò–ü–¢–´ –°–Æ–î–ê - –í –ö–û–ù–ï–¶ BODY -->
    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    
    <script>
        function fillCredentials(email, password) {
            document.getElementById('email').value = email;
            document.getElementById('password').value = password;
            alert('–î–∞–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã! –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É"');
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            Auth.init();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...');
            console.log('–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', Auth.currentUser);
            
            if (Auth.currentUser) {
                console.log('üîÑ –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –¥–∞—à–±–æ—Ä–¥...');
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 1000);
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                
                console.log('üìß –ü–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞:', email);
                
                if (!email || !password) {
                    alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                    return;
                }
                
                const result = Auth.login(email, password);
                
                if (result.success) {
                    alert('‚úÖ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + result.user.name + '!');
                    setTimeout(() => {
                        window.location.href = 'dashboard.html';
                    }, 1000);
                } else {
                    alert('‚ùå ' + result.error);
                }
            });
        });
    </script>
</body>
</html>