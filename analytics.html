<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ - IP Expense Manager</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><defs><linearGradient id='borderGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%238b5cf6'/><stop offset='50%' stop-color='%236d28d9'/><stop offset='100%' stop-color='%231e40af'/></linearGradient><linearGradient id='checkGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%23a78bfa'/><stop offset='100%' stop-color='%234f46e5'/></linearGradient><filter id='glow' x='-50%' y='-50%' width='200%' height='200%'><feGaussianBlur in='SourceGraphic' stdDeviation='1' result='blur'/><feMerge><feMergeNode in='blur'/><feMergeNode in='SourceGraphic'/></feMerge></filter></defs><circle cx='10' cy='10' r='9' fill='none' stroke='url(%23borderGrad)' stroke-width='1.5' opacity='0.9'/><path d='M6,10 L8.5,12.5 L14,7' stroke='url(%23checkGrad)' stroke-width='2.5' fill='none' stroke-linecap='round' stroke-linejoin='round' filter='url(%23glow)'/></svg>">
    
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/components/navbar.css">
    <link rel="stylesheet" href="css/analytics.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="background-animation">
        <div class="gradient-circle circle-1"></div>
        <div class="gradient-circle circle-2"></div>
        <div class="gradient-circle circle-3"></div>
    </div>

    <!-- –ù–∞–≤–±–∞—Ä -->
    <!-- –ù–∞–≤–±–∞—Ä -->
<nav class="main-navbar">
    <div class="navbar-container">
        <a href="dashboard.html" class="navbar-brand">
            <div class="brand-logo">üíº</div>
            <span class="brand-text">IP Expense Manager</span>
        </a>
        
        <button class="mobile-menu-btn">‚ò∞</button>
        
        <ul class="navbar-links">
            <li><a href="dashboard.html" class="nav-link"><span class="nav-icon">üìä</span> –î–∞—à–±–æ—Ä–¥</a></li>
            <li><a href="tasks.html" class="nav-link"><span class="nav-icon">üìã</span> –ó–∞–¥–∞—á–∏</a></li>
            <li><a href="templates.html" class="nav-link"><span class="nav-icon">üéØ</span> –®–∞–±–ª–æ–Ω—ã</a></li>
            <li><a href="cards.html" class="nav-link"><span class="nav-icon">üí≥</span> –ö–∞—Ä—Ç—ã</a></li>
            <li><a href="analytics.html" class="nav-link"><span class="nav-icon">üìà</span> –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li>
            <li><a href="history.html" class="nav-link active"><span class="nav-icon">üìú</span> –ò—Å—Ç–æ—Ä–∏—è</a></li>
        </ul>
        
        <div class="user-menu">
            <div class="user-info">
                <span class="user-name" id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                <span class="user-role" id="userRole">–†–æ–ª—å</span>
            </div>
            <button onclick="logout()" class="logout-btn">
                <span class="nav-icon">üö™</span>
                –í—ã–π—Ç–∏
            </button>
        </div>
    </div>
</nav>

    <main class="analytics-container">
        <!-- üé™ –ó–ê–ì–û–õ–û–í–û–ö –ò –î–ï–ô–°–¢–í–ò–Ø -->
        <div class="analytics-header">
            <div>
                <h1 class="page-title">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã</h1>
                <p class="page-subtitle">–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
            </div>
            <div class="dropdown">
                <button class="btn btn-primary">
                    <span class="nav-icon">üìÑ</span>
                    –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞
                </button>
                <div class="dropdown-content">
                    <a href="#" onclick="exportToCSV()">üìä CSV</a>
                    <a href="#" onclick="generatePDFReport()">üìÑ PDF</a>
                </div>
            </div>
        </div>

        <!-- üìà –ö–õ–Æ–ß–ï–í–´–ï –ú–ï–¢–†–ò–ö–ò -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-value" id="kpiTotalTasks">0</div>
                <div class="metric-label">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="kpiCompletedTasks">0</div>
                <div class="metric-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="kpiCompletionRate">0%</div>
                <div class="metric-label">–ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="kpiAvgCompletionTime">0 –¥–Ω.</div>
                <div class="metric-label">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</div>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π -->
        <div class="actions-bar">
            <button class="btn btn-secondary" onclick="refreshAnalytics()">
                <span class="nav-icon">üîÑ</span>
                –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
            </button>
        </div>

        <!-- üìä –°–ï–¢–ö–ê –ì–†–ê–§–ò–ö–û–í -->
        <div class="analytics-grid">
            <!-- üìà –†–ê–°–•–û–î–´ –ü–û –†–ï–ì–ò–û–ù–ê–ú -->
            <div class="chart-card analytics-card">
                <div class="chart-header">
                    <h3 class="chart-title">üí∞ –†–∞—Å—Ö–æ–¥—ã –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º</h3>
                </div>
                <div class="chart-container">
                    <canvas id="expensesByRegionChart"></canvas>
                </div>
            </div>

            <!-- üë• –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–¨ –£–ü–†–ê–í–õ–Ø–Æ–©–ò–• -->
            <div class="chart-card analytics-card">
                <div class="chart-header">
                    <h3 class="chart-title">üë• –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö</h3>
                </div>
                <div class="chart-container">
                    <canvas id="managerPerformanceChart"></canvas>
                </div>
            </div>

            <!-- üéØ –°–¢–ê–¢–£–°–´ –ó–ê–î–ê–ß -->
            <div class="chart-card analytics-card">
                <div class="chart-header">
                    <h3 class="chart-title">üéØ –°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á</h3>
                </div>
                <div class="chart-container">
                    <canvas id="taskStatusChart"></canvas>
                </div>
            </div>

            <!-- üìä –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï –†–ê–°–•–û–î–û–í -->
            <div class="chart-card analytics-card">
                <div class="chart-header">
                    <h3 class="chart-title">üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
                </div>
                <div class="chart-container">
                    <canvas id="expenseDistributionChart"></canvas>
                </div>
            </div>

            <!-- üí∞ –ü–õ–ê–ù VS –§–ê–ö–¢ -->
            <div class="chart-card analytics-card-wide">
                <div class="chart-header">
                    <h3 class="chart-title">üí≥ –ü–ª–∞–Ω vs –§–∞–∫—Ç (–µ–∂–µ–º–µ—Å—è—á–Ω–æ)</h3>
                </div>
                <div class="chart-container">
                    <canvas id="planVsActualChart"></canvas>
                </div>
            </div>

            <!-- üìà –¢–†–ï–ù–î–´ –ü–û –ú–ï–°–Ø–¶–ê–ú -->
            <div class="chart-card analytics-card-wide">
                <div class="chart-header">
                    <h3 class="chart-title">üìà –¢—Ä–µ–Ω–¥—ã –ø–æ –º–µ—Å—è—Ü–∞–º</h3>
                </div>
                <div class="chart-container">
                    <canvas id="monthlyTrendsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- üë• –¢–ê–ë–õ–ò–¶–ê –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò –£–ü–†–ê–í–õ–Ø–Æ–©–ò–• -->
        <div class="chart-card">
            <div class="chart-header">
                <h3 class="chart-title">üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö</h3>
            </div>
            <div style="overflow-x: auto;">
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>–£–ø—Ä–∞–≤–ª—è—é—â–∏–π</th>
                            <th>–í—Å–µ–≥–æ –∑–∞–¥–∞—á</th>
                            <th>–í—ã–ø–æ–ª–Ω–µ–Ω–æ</th>
                            <th>–ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</th>
                            <th>–°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞</th>
                            <th>–†–µ–≥–∏–æ–Ω—ã</th>
                        </tr>
                    </thead>
                    <tbody id="managerPerformanceTable">
                        <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <script src="js/navbar.js"></script>
    <script src="js/analytics.js"></script>
</body>
</html>