<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä –î–∞—à–±–æ—Ä–¥ - IP Expense Manager</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- üé® FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><defs><linearGradient id='borderGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%238b5cf6'/><stop offset='50%' stop-color='%236d28d9'/><stop offset='100%' stop-color='%231e40af'/></linearGradient><linearGradient id='checkGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%23a78bfa'/><stop offset='100%' stop-color='%234f46e5'/></linearGradient><filter id='glow' x='-50%' y='-50%' width='200%' height='200%'><feGaussianBlur in='SourceGraphic' stdDeviation='1' result='blur'/><feMerge><feMergeNode in='blur'/><feMergeNode in='SourceGraphic'/></feMerge></filter></defs><circle cx='10' cy='10' r='9' fill='none' stroke='url(%23borderGrad)' stroke-width='1.5' opacity='0.9'/><path d='M6,10 L8.5,12.5 L14,7' stroke='url(%23checkGrad)' stroke-width='2.5' fill='none' stroke-linecap='round' stroke-linejoin='round' filter='url(%23glow)'/></svg>">
    <!-- üîß –ü–û–î–ö–õ–Æ–ß–ê–ï–ú –£–¢–ò–õ–ò–¢–´ -->
    <script src="js/data.js"></script>
    <script src="js/utils.js"></script>
</head>
<body>
    <!-- üéØ –•–ï–î–ï–† -->
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <span>üí∞</span>
                IP Expense Manager
            </div>
            <div class="nav-links">
                <a href="dashboard.html" class="nav-link active">üìä –î–∞—à–±–æ—Ä–¥</a>
                <a href="create-task.html" class="nav-link">‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</a>
                <a href="tasks.html" class="nav-link">üìã –ó–∞–¥–∞—á–∏</a>
                <a href="expense-items.html" class="nav-link">üóÇÔ∏è –°—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</a>
                <a href="cards.html" class="nav-link">üí≥ –ö–∞—Ä—Ç—ã</a>
                <div class="user-info">
                    <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                <button class="btn btn-outline" onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
            </div>
        </nav>
    </header>

    <main class="container">
        <!-- üé™ –ü–†–ò–í–ï–¢–°–¢–í–ò–ï -->
        <div class="glass-card animate-bounce-in">
            <h1 style="margin-bottom: 8px;">üìä –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã</h1>
            <p class="text-muted">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞–º–∏ –ò–ü</p>
        </div>

        <!-- üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
        <div class="flex gap-6 mt-6" style="flex-wrap: wrap;">
            <div class="glass-card" style="flex: 1; min-width: 200px;">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-muted">–í—Å–µ–≥–æ –ò–ü</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--primary);">28</div>
                    </div>
                    <div style="font-size: 2.5rem;">üè¢</div>
                </div>
            </div>

            <div class="glass-card" style="flex: 1; min-width: 200px;">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-muted">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--warning);" id="activeTasks">0</div>
                    </div>
                    <div style="font-size: 2.5rem;">üìã</div>
                </div>
            </div>

            <div class="glass-card" style="flex: 1; min-width: 200px;">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-muted">–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--success);" id="completedToday">0</div>
                    </div>
                    <div style="font-size: 2.5rem;">‚úÖ</div>
                </div>
            </div>

            <div class="glass-card" style="flex: 1; min-width: 200px;">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-muted">–†–µ–≥–∏–æ–Ω–æ–≤</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--secondary);">6</div>
                    </div>
                    <div style="font-size: 2.5rem;">üó∫Ô∏è</div>
                </div>
            </div>
        </div>

        <!-- üöÄ –ë–´–°–¢–†–´–ï –î–ï–ô–°–¢–í–ò–Ø -->
        <div class="glass-card mt-6">
            <h2 style="margin-bottom: 20px;">üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            <div class="flex gap-4" style="flex-wrap: wrap;">
                <a href="create-task.html" class="btn btn-primary">‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</a>
                <a href="tasks.html" class="btn btn-success">üìã –í—Å–µ –∑–∞–¥–∞—á–∏</a>
                <a href="expense-items.html" class="btn btn-warning">üóÇÔ∏è –°—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</a>
                <a href="cards.html" class="btn btn-outline">üí≥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–∞–º–∏</a>
            </div>
        </div>

        <!-- üìä –ü–û–°–õ–ï–î–ù–ò–ï –ó–ê–î–ê–ß–ò -->
        <div class="glass-card mt-6">
            <div class="flex items-center justify-between mb-4">
                <h2>üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏</h2>
                <a href="tasks.html" class="btn btn-outline">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</a>
            </div>
            <div id="recentTasks">
                <div class="text-center text-muted" style="padding: 40px;">
                    <div style="font-size: 3rem; margin-bottom: 16px;">üìã</div>
                    <p>–ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å</p>
                </div>
            </div>
        </div>
    </main>

    <script>
        function logout() {
            localStorage.removeItem('currentUser');
            appData.currentUser = null;
            showNotification('üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!', 'info');
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 1000);
        }

        function loadDashboardData() {
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            document.getElementById('activeTasks').textContent = '12';
            document.getElementById('completedToday').textContent = '5';
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–¥–∞—á
            const recentTasks = [
                { title: '–ó–∞–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤', status: 'completed', region: '–ê—Å—Ç—Ä–∞—Ö–∞–Ω—å', date: new Date() },
                { title: '–û–ø–ª–∞—Ç–∞ –∞—Ä–µ–Ω–¥—ã', status: 'in_progress', region: '–ö—É—Ä–≥–∞–Ω', date: new Date() },
                { title: '–ó–∞–ø—Ä–∞–≤–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è', status: 'pending', region: '–ë—É—Ä—è—Ç–∏—è', date: new Date() }
            ];
            
            const tasksHtml = recentTasks.map(task => `
                <div class="flex items-center justify-between p-4 border-b border-gray-200 last:border-b-0">
                    <div>
                        <div class="font-semibold">${task.title}</div>
                        <div class="text-sm text-muted">${task.region} ‚Ä¢ ${formatDate(task.date)}</div>
                    </div>
                    <span class="badge ${task.status === 'completed' ? 'badge-success' : task.status === 'in_progress' ? 'badge-warning' : 'badge-info'}">
                        ${appData.taskStatuses[task.status]}
                    </span>
                </div>
            `).join('');
            
            document.getElementById('recentTasks').innerHTML = tasksHtml || `
                <div class="text-center text-muted" style="padding: 40px;">
                    <div style="font-size: 3rem; margin-bottom: 16px;">üìã</div>
                    <p>–ù–µ—Ç –∑–∞–¥–∞—á –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                </div>
            `;
        }

        // üîß –ò–ù–ò–¶–ò–ê–õ–ò–ó–ò–†–£–ï–ú –ü–†–ò–õ–û–ñ–ï–ù–ò–ï –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï –°–¢–†–ê–ù–ò–¶–´
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            if (!appData.currentUser) {
                window.location.href = 'login.html';
                return;
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥–∞
            loadDashboardData();
        });
    </script>
</body>
</html>