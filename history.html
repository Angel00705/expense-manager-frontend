<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìã –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π - IP Expense Manager</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- –§–ê–í–ò–ö–û–ù -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><defs><linearGradient id='borderGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%238b5cf6'/><stop offset='50%' stop-color='%236d28d9'/><stop offset='100%' stop-color='%231e40af'/></linearGradient><linearGradient id='checkGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%23a78bfa'/><stop offset='100%' stop-color='%234f46e5'/></linearGradient><filter id='glow' x='-50%' y='-50%' width='200%' height='200%'><feGaussianBlur in='SourceGraphic' stdDeviation='1' result='blur'/><feMerge><feMergeNode in='blur'/><feMergeNode in='SourceGraphic'/></feMerge></filter></defs><circle cx='10' cy='10' r='9' fill='none' stroke='url(%23borderGrad)' stroke-width='1.5' opacity='0.9'/><path d='M6,10 L8.5,12.5 L14,7' stroke='url(%23checkGrad)' stroke-width='2.5' fill='none' stroke-linecap='round' stroke-linejoin='round' filter='url(%23glow)'/></svg>">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <a href="dashboard.html" class="navbar-brand">üéØ IP Expense Manager</a>
                <div style="display: flex; align-items: center; gap: 20px;">
                    <span style="color: white; font-size: 14px;" id="userInfo"></span>
                    <button onclick="Auth.logout()" class="btn" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); font-size: 14px;">üö™ –í—ã–π—Ç–∏</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="container" style="padding: 30px 20px;">
        <div class="glass-card animate-slide-in" style="padding: 24px;">
            <!-- –ó–ê–ì–û–õ–û–í–û–ö –° –ö–ù–û–ü–ö–û–ô –ù–ê–ó–ê–î (–û–ë–ù–û–í–õ–ï–ù–û) -->
            <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px;">
                <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ NavigationHelper -->
                <div style="flex: 1;">
                    <h1 style="margin-bottom: 8px; color: var(--primary);">üìã –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</h1>
                    <p style="color: var(--text-light); margin: 0;">–ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ</p>
                </div>
                <div style="display: flex; gap: 12px;">
                    <button class="btn btn-outline" onclick="clearHistory()" id="clearHistoryBtn" style="display: none;">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                    <button class="btn btn-primary" onclick="exportHistory()">üìÑ –≠–∫—Å–ø–æ—Ä—Ç</button>
                </div>
            </div>

            <!-- –§–ò–õ–¨–¢–†–´ -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                <div class="form-group">
                    <label class="form-label">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</label>
                    <select class="form-control form-select" id="userFilter" onchange="filterHistory()">
                        <option value="">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">üìä –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è</label>
                    <select class="form-control form-select" id="actionFilter" onchange="filterHistory()">
                        <option value="">–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è</option>
                        <option value="create">–°–æ–∑–¥–∞–Ω–∏–µ</option>
                        <option value="update">–ò–∑–º–µ–Ω–µ–Ω–∏–µ</option>
                        <option value="delete">–£–¥–∞–ª–µ–Ω–∏–µ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">üìÖ –ü–µ—Ä–∏–æ–¥</label>
                    <select class="form-control form-select" id="periodFilter" onchange="filterHistory()">
                        <option value="all">–ó–∞ –≤—Å–µ –≤—Ä–µ–º—è</option>
                        <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                        <option value="week">–ó–∞ –Ω–µ–¥–µ–ª—é</option>
                        <option value="month">–ó–∞ –º–µ—Å—è—Ü</option>
                    </select>
                </div>
            </div>

            <!-- –ò–°–¢–û–†–ò–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô -->
            <div id="historyList">
                <div style="text-align: center; color: var(--text-light); padding: 60px;">
                    <div style="font-size: 4rem; margin-bottom: 16px;">üìã</div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π...</p>
                </div>
            </div>
        </div>
    </main>

    <script src="js/data.js"></script>
    <script src="js/utils.js"></script>
    <script>
        // ... (–≤–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π JavaScript –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìã –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...');
            
            Auth.init();
            if (!Auth.requireAuth()) return;
            
            // –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π
            if (!Auth.isAdmin()) {
                Notification.error('–î–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–≥—Ä–∞–Ω–∏—á–µ–Ω');
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 2000);
                return;
            }
            
            updateUserInfo();
            setupUI();
            loadHistory();
            
            // –î–û–ë–ê–í–õ–Ø–ï–ú –≠–¢–£ –°–¢–†–û–ß–ö–£ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
            NavigationHelper.addBackButton('dashboard.html', '‚Üê –ù–∞–∑–∞–¥ –∫ –¥–∞—à–±–æ—Ä–¥—É');
        });

        // ... (–æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
    </script>
</body>
</html>