<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ - Expense Manager</title>
    
    <!-- üé® FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><defs><linearGradient id='borderGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%238b5cf6'/><stop offset='50%' stop-color='%236d28d9'/><stop offset='100%' stop-color='%231e40af'/></linearGradient><linearGradient id='checkGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%23a78bfa'/><stop offset='100%' stop-color='%234f46e5'/></linearGradient><filter id='glow' x='-50%' y='-50%' width='200%' height='200%'><feGaussianBlur in='SourceGraphic' stdDeviation='1' result='blur'/><feMerge><feMergeNode in='blur'/><feMergeNode in='SourceGraphic'/></feMerge></filter></defs><circle cx='10' cy='10' r='9' fill='none' stroke='url(%23borderGrad)' stroke-width='1.5' opacity='0.9'/><path d='M6,10 L8.5,12.5 L14,7' stroke='url(%23checkGrad)' stroke-width='2.5' fill='none' stroke-linecap='round' stroke-linejoin='round' filter='url(%23glow)'/></svg>">
    
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="stylesheet" href="./css/tables.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <a href="dashboard.html" class="back-link">‚Üê –ù–∞–∑–∞–¥ –∫ –¥–∞—à–±–æ—Ä–¥—É</a>
                <div class="logo">üí∞</div>
                <h1>–°—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</h1>
            </div>
            <div class="header-right">
                <span class="user-info" id="userInfo"></span>
                <button class="btn-primary" onclick="showAddForm()">+ –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <div class="page-header">
                <h2>üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å—è–º–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                <p>–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç–∞—Ç–µ–π —Ä–∞—Å—Ö–æ–¥–æ–≤ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É—á–µ—Ç–∞</p>
            </div>

            <!-- –§–∏–ª—å—Ç—Ä—ã -->
            <div class="filters-section">
                <div class="filter-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                    <select class="form-select" onchange="filterItems()">
                        <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                        <option value="operating">–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</option>
                        <option value="administrative">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ</option>
                        <option value="tax">–ù–∞–ª–æ–≥–æ–≤—ã–µ</option>
                    </select>
                </div>
                <div class="search-group">
                    <input type="text" class="form-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." onkeyup="filterItems()">
                </div>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç–µ–π —Ä–∞—Å—Ö–æ–¥–æ–≤ -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                            <th>–ë—é–¥–∂–µ—Ç (–º–µ—Å.)</th>
                            <th>–õ–∏–º–∏—Ç</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="expenseItemsTable">
                        <!-- –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </tbody>
                </table>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-content">
                        <h3>24</h3>
                        <p>–í—Å–µ–≥–æ —Å—Ç–∞—Ç–µ–π</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-content">
                        <h3>18</h3>
                        <p>–ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç–∞—Ç—å–∏</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ö°</div>
                    <div class="stat-content">
                        <h3>6</h3>
                        <p>–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
    <div id="addModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é —Ä–∞—Å—Ö–æ–¥–∞</h3>
                <button class="modal-close" onclick="hideAddForm()">√ó</button>
            </div>
            <form id="addExpenseForm" class="modal-form">
                <div class="input-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ *</label>
                    <input type="text" class="form-input" required>
                </div>
                <div class="input-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                    <select class="form-select" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                        <option value="operating">–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</option>
                        <option value="administrative">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ</option>
                        <option value="tax">–ù–∞–ª–æ–≥–æ–≤—ã–µ</option>
                        <option value="marketing">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <label>–ú–µ—Å—è—á–Ω—ã–π –±—é–¥–∂–µ—Ç</label>
                        <input type="number" class="form-input" placeholder="0.00">
                    </div>
                    <div class="input-group">
                        <label>–õ–∏–º–∏—Ç —Ä–∞—Å—Ö–æ–¥–∞</label>
                        <input type="number" class="form-input" placeholder="0.00">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="hideAddForm()">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç–µ–π —Ä–∞—Å—Ö–æ–¥–æ–≤
        const expenseItems = [
            { id: 1, name: '–ê—Ä–µ–Ω–¥–∞ –ø–æ–º–µ—â–µ–Ω–∏—è', category: 'operating', budget: '50,000', limit: '55,000', status: 'active' },
            { id: 2, name: '–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏', category: 'operating', budget: '15,000', limit: '18,000', status: 'active' },
            { id: 3, name: '–ó–∞—Ä–∞–±–æ—Ç–Ω–∞—è –ø–ª–∞—Ç–∞', category: 'operating', budget: '200,000', limit: '220,000', status: 'active' },
            { id: 4, name: '–ù–∞–ª–æ–≥–∏ –£–°–ù', category: 'tax', budget: '45,000', limit: '50,000', status: 'active' },
            { id: 5, name: '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ —Ä–µ–∫–ª–∞–º–∞', category: 'marketing', budget: '30,000', limit: '35,000', status: 'active' },
            { id: 6, name: '–•–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã', category: 'operating', budget: '5,000', limit: '7,000', status: 'active' }
        ];

        function loadExpenseItems() {
            const tbody = document.getElementById('expenseItemsTable');
            tbody.innerHTML = expenseItems.map(item => `
                <tr>
                    <td>${item.name}</td>
                    <td><span class="category-badge category-${item.category}">${getCategoryName(item.category)}</span></td>
                    <td>${item.budget} ‚ÇΩ</td>
                    <td>${item.limit} ‚ÇΩ</td>
                    <td><span class="status-badge status-${item.status}">${item.status === 'active' ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞'}</span></td>
                    <td>
                        <button class="btn-sm btn-secondary" onclick="editItem(${item.id})">‚úèÔ∏è</button>
                        <button class="btn-sm btn-danger" onclick="deleteItem(${item.id})">üóëÔ∏è</button>
                    </td>
                </tr>
            `).join('');
        }

        function getCategoryName(category) {
            const categories = {
                'operating': '–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ',
                'administrative': '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ',
                'tax': '–ù–∞–ª–æ–≥–æ–≤—ã–µ',
                'marketing': '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥'
            };
            return categories[category] || category;
        }

        function showAddForm() {
            document.getElementById('addModal').style.display = 'flex';
        }

        function hideAddForm() {
            document.getElementById('addModal').style.display = 'none';
        }

        function filterItems() {
            // –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
            console.log('–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–µ–π...');
        }

        function editItem(id) {
            alert(`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ #${id}`);
        }

        function deleteItem(id) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å—Ç–∞—Ç—å—é —Ä–∞—Å—Ö–æ–¥–∞?')) {
                alert(`–°—Ç–∞—Ç—å—è #${id} —É–¥–∞–ª–µ–Ω–∞`);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('auth_token');
            const userEmail = localStorage.getItem('user_email');
            
            if (!token) {
                window.location.href = 'login.html';
                return;
            }

            document.getElementById('userInfo').textContent = userEmail;
            loadExpenseItems();

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
            document.getElementById('addExpenseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('–ù–æ–≤–∞—è —Å—Ç–∞—Ç—å—è —Ä–∞—Å—Ö–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
                hideAddForm();
            });
        });
    </script>
</body>
</html>