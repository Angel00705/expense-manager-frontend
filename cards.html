<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã - Expense Manager</title>
    
    <!-- üé® FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><defs><linearGradient id='borderGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%238b5cf6'/><stop offset='50%' stop-color='%236d28d9'/><stop offset='100%' stop-color='%231e40af'/></linearGradient><linearGradient id='checkGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='%23a78bfa'/><stop offset='100%' stop-color='%234f46e5'/></linearGradient><filter id='glow' x='-50%' y='-50%' width='200%' height='200%'><feGaussianBlur in='SourceGraphic' stdDeviation='1' result='blur'/><feMerge><feMergeNode in='blur'/><feMergeNode in='SourceGraphic'/></feMerge></filter></defs><circle cx='10' cy='10' r='9' fill='none' stroke='url(%23borderGrad)' stroke-width='1.5' opacity='0.9'/><path d='M6,10 L8.5,12.5 L14,7' stroke='url(%23checkGrad)' stroke-width='2.5' fill='none' stroke-linecap='round' stroke-linejoin='round' filter='url(%23glow)'/></svg>">
    
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="stylesheet" href="./css/cards.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <a href="dashboard.html" class="back-link">‚Üê –ù–∞–∑–∞–¥ –∫ –¥–∞—à–±–æ—Ä–¥—É</a>
                <div class="logo">üí∞</div>
                <h1>–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã</h1>
            </div>
            <div class="header-right">
                <span class="user-info" id="userInfo"></span>
                <button class="btn-primary" onclick="showAddCardForm()">+ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <div class="page-header">
                <h2>üí≥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏</h2>
                <p>–í—Å–µ –∫–∞—Ä—Ç—ã –¥–ª—è –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –ò–ü</p>
            </div>

            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–∞—Ä—Ç -->
            <div class="cards-grid" id="cardsGrid">
                <!-- –ö–∞—Ä—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ä—Ç–∞–º -->
            <div class="cards-stats">
                <div class="stat-card">
                    <div class="stat-icon">üí≥</div>
                    <div class="stat-content">
                        <h3>42</h3>
                        <p>–í—Å–µ–≥–æ –∫–∞—Ä—Ç</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-content">
                        <h3>38</h3>
                        <p>–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üè¢</div>
                    <div class="stat-content">
                        <h3>27</h3>
                        <p>–ü—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –ò–ü</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã -->
    <div id="addCardModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üí≥ –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É</h3>
                <button class="modal-close" onclick="hideAddCardForm()">√ó</button>
            </div>
            <form id="addCardForm" class="modal-form">
                <div class="input-group">
                    <label>–ë–∞–Ω–∫ *</label>
                    <select class="form-select" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –±–∞–Ω–∫</option>
                        <option value="tinkoff">–¢–∏–Ω—å–∫–æ—Ñ—Ñ</option>
                        <option value="sber">–°–±–µ—Ä–±–∞–Ω–∫</option>
                        <option value="alfa">–ê–ª—å—Ñ–∞-–ë–∞–Ω–∫</option>
                        <option value="vtb">–í–¢–ë</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã *</label>
                    <input type="text" class="form-input" placeholder="0000 0000 0000 0000" required>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <label>–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è *</label>
                        <input type="text" class="form-input" placeholder="–ú–ú/–ì–ì" required>
                    </div>
                    <div class="input-group">
                        <label>–î–µ—Ä–∂–∞—Ç–µ–ª—å –∫–∞—Ä—Ç—ã *</label>
                        <input type="text" class="form-input" placeholder="IVANOV I" required>
                    </div>
                </div>
                <div class="input-group">
                    <label>–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ –ò–ü</label>
                    <select class="form-select">
                        <option value="">–ù–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å</option>
                        <option value="ip1">–ò–ü "–í–æ—Å—Ç–æ–∫"</option>
                        <option value="ip2">–ò–ü "–°–µ–≤–µ—Ä"</option>
                        <option value="ip3">–ò–ü "–Æ–≥"</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>–õ–∏–º–∏—Ç –∫–∞—Ä—Ç—ã</label>
                    <input type="number" class="form-input" placeholder="0.00">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="hideAddCardForm()">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç
        const bankCards = [
            { 
                id: 1, 
                bank: '–¢–∏–Ω—å–∫–æ—Ñ—Ñ', 
                number: '**** 1234', 
                type: 'debit', 
                balance: '125,430 ‚ÇΩ', 
                limit: '500,000 ‚ÇΩ',
                status: 'active',
                ip: '–ò–ü "–í–æ—Å—Ç–æ–∫"',
                color: '#ffdd2d'
            },
            { 
                id: 2, 
                bank: '–°–±–µ—Ä–±–∞–Ω–∫', 
                number: '**** 5678', 
                type: 'debit', 
                balance: '89,210 ‚ÇΩ', 
                limit: '300,000 ‚ÇΩ',
                status: 'active',
                ip: '–ò–ü "–°–µ–≤–µ—Ä"',
                color: '#21a038'
            },
            { 
                id: 3, 
                bank: '–ê–ª—å—Ñ–∞-–ë–∞–Ω–∫', 
                number: '**** 9012', 
                type: 'credit', 
                balance: '-15,000 ‚ÇΩ', 
                limit: '150,000 ‚ÇΩ',
                status: 'active',
                ip: '–ò–ü "–Æ–≥"',
                color: '#ef3124'
            }
        ];

        function loadBankCards() {
            const grid = document.getElementById('cardsGrid');
            grid.innerHTML = bankCards.map(card => `
                <div class="bank-card" style="border-left-color: ${card.color}">
                    <div class="card-header">
                        <div class="card-bank">${card.bank}</div>
                        <div class="card-type">${card.type === 'debit' ? '–î–µ–±–µ—Ç–æ–≤–∞—è' : '–ö—Ä–µ–¥–∏—Ç–Ω–∞—è'}</div>
                    </div>
                    <div class="card-number">${card.number}</div>
                    <div class="card-details">
                        <div class="card-balance">
                            <span class="label">–ë–∞–ª–∞–Ω—Å:</span>
                            <span class="value ${card.balance.startsWith('-') ? 'negative' : ''}">${card.balance}</span>
                        </div>
                        <div class="card-limit">
                            <span class="label">–õ–∏–º–∏—Ç:</span>
                            <span class="value">${card.limit}</span>
                        </div>
                        <div class="card-ip">
                            <span class="label">–ò–ü:</span>
                            <span class="value">${card.ip}</span>
                        </div>
                    </div>
                    <div class="card-actions">
                        <button class="btn-sm btn-secondary" onclick="editCard(${card.id})">‚úèÔ∏è</button>
                        <button class="btn-sm btn-danger" onclick="blockCard(${card.id})">üö´</button>
                    </div>
                </div>
            `).join('');
        }

        function showAddCardForm() {
            document.getElementById('addCardModal').style.display = 'flex';
        }

        function hideAddCardForm() {
            document.getElementById('addCardModal').style.display = 'none';
        }

        function editCard(id) {
            alert(`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã #${id}`);
        }

        function blockCard(id) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É –∫–∞—Ä—Ç—É?')) {
                alert(`–ö–∞—Ä—Ç–∞ #${id} –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞`);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('auth_token');
            const userEmail = localStorage.getItem('user_email');
            
            if (!token) {
                window.location.href = 'login.html';
                return;
            }

            document.getElementById('userInfo').textContent = userEmail;
            loadBankCards();

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
            document.getElementById('addCardForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('–ù–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
                hideAddCardForm();
            });
        });
    </script>
</body>
</html>