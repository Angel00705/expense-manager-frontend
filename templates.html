<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìã –®–∞–±–ª–æ–Ω—ã –∑–∞–¥–∞—á - IP Expense Manager</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <a href="dashboard.html" class="navbar-brand">üéØ IP Expense Manager</a>
                <div style="display: flex; align-items: center; gap: 20px;">
                    <span style="color: white; font-size: 14px;" id="userInfo"></span>
                    <button onclick="Auth.logout()" class="btn" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); font-size: 14px;">
                        üö™ –í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="container" style="padding: 40px 20px;">
        <div class="glass-card" style="padding: 30px; margin-bottom: 30px;">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <div>
                    <h1 style="margin-bottom: 8px; color: var(--primary);">üìã –®–∞–±–ª–æ–Ω—ã –∑–∞–¥–∞—á</h1>
                    <p style="color: var(--text-light); margin: 0;">–ì–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á</p>
                </div>
                <button class="btn btn-primary" onclick="showTemplateForm()">‚ûï –ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω</button>
            </div>

            <div class="row">
                <div class="col-4">
                    <div class="glass-card" style="padding: 20px; text-align: center; cursor: pointer;" 
                         onclick="useTemplate('monthly_rent')">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üè¢</div>
                        <h3>–ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞</h3>
                        <p style="color: var(--text-light); margin: 8px 0;">–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞</p>
                        <div style="color: var(--primary); font-weight: 600;">15,000 ‚ÇΩ</div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="glass-card" style="padding: 20px; text-align: center; cursor: pointer;"
                         onclick="useTemplate('office_supplies')">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üìé</div>
                        <h3>–ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è</h3>
                        <p style="color: var(--text-light); margin: 8px 0;">–û—Ñ–∏—Å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏</p>
                        <div style="color: var(--primary); font-weight: 600;">5,000 ‚ÇΩ</div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="glass-card" style="padding: 20px; text-align: center; cursor: pointer;"
                         onclick="useTemplate('cleaning')">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üßΩ</div>
                        <h3>–£–±–æ—Ä–∫–∞ –æ—Ñ–∏—Å–∞</h3>
                        <p style="color: var(--text-light); margin: 8px 0;">–ö–ª–∏–Ω–∏–Ω–≥–æ–≤—ã–µ —É—Å–ª—É–≥–∏</p>
                        <div style="color: var(--primary); font-weight: 600;">3,000 ‚ÇΩ</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            Auth.init();
            if (!Auth.requireAuth()) return;
            updateUserInfo();
        });

        function updateUserInfo() {
            const userInfo = document.getElementById('userInfo');
            if (userInfo && Auth.currentUser) {
                userInfo.innerHTML = `üëã ${Auth.currentUser.name} <span style="opacity: 0.8;">(${Auth.currentUser.role === 'admin' ? '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä' : '–£–ø—Ä–∞–≤–ª—è—é—â–∏–π'})</span>`;
            }
        }

        function useTemplate(templateKey) {
            const template = appData.taskTemplates[templateKey];
            if (template) {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —à–∞–±–ª–æ–Ω –≤ localStorage –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–æ–∑–¥–∞–Ω–∏—é –∑–∞–¥–∞—á–∏
                localStorage.setItem('selectedTemplate', JSON.stringify(template));
                window.location.href = 'create-task.html?template=' + templateKey;
            }
        }

        function showTemplateForm() {
            Notification.info('–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏');
        }
    </script>
</body>
</html>